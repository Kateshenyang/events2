!function(){"use strict";const t=new class{constructor(){this.fieldSize=4}drawField(){const t=document.createElement("div");t.classList.add("field");for(let i=0;i<4*this.fieldSize;i++){const i=document.createElement("div");i.classList.add("cell"),t.appendChild(i)}return this.field=t,this.field}getField(){return this.drawField(),this.field}},i=new class{constructor(){this.goblin=null}createGoblin(){const t=document.createElement("div");t.classList.add("goblin"),this.goblin=t}getGoblin(){return this.createGoblin(),this.goblin}},e=new class{constructor(t,i){this.field=t,this.fieldSize=4,this.goblin=i,this.activeGoblin=null,this.position=null,this.score=0,this.missed=0,this.maxMissed=5,this.intervalId=null}newField(){const t=this.field.getField(this.fieldSize),i=document.querySelector("body");let e=document.querySelector(".container");e&&e.remove(),e=document.createElement("div"),e.classList.add("container"),e.append(t),i.prepend(e),this.cells=[...t.children],this.cells.forEach((t=>t.addEventListener("click",this.handleCellClick.bind(this))))}handleCellClick(t){t.currentTarget.contains(this.activeGoblin)?(this.score++,this.activeGoblin.remove(),this.activeGoblin=null):this.missed++,this.checkGameOver()}randomPosition(){const t=Math.floor(Math.random()*this.fieldSize*4);t!==this.position?(this.deleteGoblin(),this.position=t,this.adventGoblin()):this.randomPosition()}deleteGoblin(){null!==this.activeGoblin&&(this.cells[this.position].firstChild.remove(),this.activeGoblin=null)}adventGoblin(){this.activeGoblin=this.goblin.getGoblin(),this.cells[this.position].append(this.activeGoblin)}checkGameOver(){this.missed>=this.maxMissed&&(this.stop(),alert(`Game Over! Your score is ${this.score}`))}play(){this.intervalId=setInterval((()=>{this.randomPosition()}).bind(this),1e3)}stop(){clearInterval(this.intervalId)}start(){this.score=0,this.missed=0,this.newField(),this.play()}}(t,i);document.getElementById("startButton").addEventListener("click",(()=>{e.start(),function(t){const i=document.getElementById("score");setInterval((()=>{i.textContent=`Score: ${t.score}`}),100)}(e)}))}();